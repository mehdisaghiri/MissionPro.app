(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[769],{3364:(e,t,s)=>{Promise.resolve().then(s.bind(s,9852))},9852:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>b});var l=s(5155),a=s(8957),r=s(4267),n=s(9810),c=s(2115),i=s(7903),o=s(741),d=s(3015),u=s(9662),x=s(5037),f=s(6046);let h=function(e){let{jobId:t}=e,{jobTitle:s,jobDescription:a,salaryType:h,activeEmploymentTypes:b,salary:m,location:y,skills:g,negotiable:p,tags:j,resetJobForm:w,setJobTitle:N,setJobDescription:v,setSalaryType:S,setActiveEmploymentTypes:k,setSalary:A,setLocation:F,setSkills:E,setNegotiable:_,setTags:C}=(0,r.S)(),{jobs:J,updateJob:D}=(0,n.x)(),L=(0,f.useRouter)(),[O,T]=(0,c.useState)(!0),[R,q]=(0,c.useState)(null),I=["About","Job Details","Skills","Location","Summary"],[M,P]=c.useState(I[0]);(0,c.useEffect)(()=>{let e=J.find(e=>e._id===t);if(e){q(e),N(e.title),v(e.description),S(e.salaryType),k(e.jobType),A(e.salary),E(e.skills),_(e.negotiable),C(e.tags);let t=e.location.split(", "),s={address:"",city:"",country:""};3===t.length?(s.address=t[0],s.city=t[1],s.country=t[2]):2===t.length?(s.city=t[0],s.country=t[1]):1===t.length&&(s.country=t[0]),F(s),T(!1)}else J.length>0&&(x.Ay.error("Job not found"),L.push("/myjobs"))},[t,J]);let U=e=>{P(e)},z=e=>{switch(e){case"About":return s&&b.length>0?"bg-[#7263F3] text-white":"bg-gray-300";case"Job Details":return a&&m>0?"bg-[#7263F3] text-white":"bg-gray-300";case"Skills":return g.length&&j.length>0?"bg-[#7263F3] text-white":"bg-gray-300";case"Location":return y.address||y.city||y.country?"bg-[#7263F3] text-white":"bg-gray-300";default:return"bg-gray-300"}},B=async e=>{e.preventDefault();try{let e={title:s,description:a,salaryType:h,jobType:b,salary:m,location:"".concat(y.address?y.address+", ":"").concat(y.city?y.city+", ":"").concat(y.country),skills:g,negotiable:p,tags:j};await D(t,e),L.push("/job/".concat(t))}catch(e){console.error("Error updating job:",e)}};return O?(0,l.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,l.jsx)("div",{className:"text-lg",children:"Loading job data..."})}):(0,l.jsxs)("div",{className:"w-full flex gap-6",children:[(0,l.jsx)("div",{className:"self-start w-[10rem] flex flex-col bg-white rounded-md shadow-sm overflow-hidden",children:I.map((e,t)=>(0,l.jsxs)("button",{className:"pl-4 py-3 relative flex self-start items-center gap-2 font-medium \n                ".concat(M===e?"text-[#7263F3]":"text-gray-500","\n                "),onClick:()=>U(e),children:[(0,l.jsx)("span",{className:"w-6 h-6 rounded-full flex items-center border border-gray-400/60 justify-center text-gray-500\n                ".concat(M===e?" text-white":""," ").concat(z(e)),children:t+1}),e,M===e&&(0,l.jsx)("span",{className:"w-1 h-full absolute left-0 top-0 bg-[#7263F3] rounded-full"})]},t))}),(0,l.jsxs)("form",{action:"",className:"p-6 flex-1 bg-white rounded-lg self-start",onSubmit:B,children:[(()=>{switch(M){case"About":return(0,l.jsx)(i.A,{});case"Job Details":return(0,l.jsx)(o.A,{});case"Skills":return(0,l.jsx)(d.A,{});case"Location":return(0,l.jsx)(u.A,{})}})(),(0,l.jsxs)("div",{className:"flex justify-end gap-4 mt-4",children:["Summary"!==M&&(0,l.jsx)("button",{type:"button",className:"px-6 py-2 bg-[#7263F3] text-white rounded-md",onClick:()=>{let e=I.indexOf(M);P(I[e+1])},children:"Next"}),"Summary"===M&&(0,l.jsx)("button",{type:"submit",className:"self-end px-6 py-2 bg-[#7263F3] text-white rounded-md",children:"Update Job"})]})]})]})},b=function(e){let{params:t}=e,{isAuthenticated:s,loading:n}=(0,r.S)(),i=(0,f.useRouter)(),o=c.use(t);return((0,c.useEffect)(()=>{n||s||i.push("https://missionpro-app-4qaf.onrender.com/login")},[s,n,i]),n)?(0,l.jsx)("div",{children:"Chargement..."}):s?(0,l.jsxs)("div",{className:"flex flex-col",children:[(0,l.jsx)(a.A,{}),(0,l.jsx)("h2",{className:"flex-1 pt-8 mx-auto w-[90%] text-3xl font-bold text-black",children:"Modifier l'Offre d'Emploi"}),(0,l.jsx)("div",{className:"flex-1 pt-8 w-[90%] mx-auto flex justify-center items-center",children:(0,l.jsx)(h,{jobId:o.id})})]}):null}}},e=>{var t=t=>e(e.s=t);e.O(0,[598,238,94,37,817,957,805,441,517,358],()=>t(3364)),_N_E=e.O()}]);