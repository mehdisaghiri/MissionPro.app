(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[662],{780:(e,s,a)=>{Promise.resolve().then(a.bind(a,6352))},4319:(e,s,a)=>{"use strict";a.d(s,{BT:()=>o,Wu:()=>c,ZB:()=>d,Zp:()=>i,aR:()=>n,wL:()=>p});var r=a(5155),l=a(2115),t=a(9602);let i=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,r.jsx)("div",{ref:s,className:(0,t.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...l})});i.displayName="Card";let n=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,r.jsx)("div",{ref:s,className:(0,t.cn)("flex flex-col space-y-1.5 p-6",a),...l})});n.displayName="CardHeader";let d=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,r.jsx)("div",{ref:s,className:(0,t.cn)("text-2xl font-semibold leading-none tracking-tight",a),...l})});d.displayName="CardTitle";let o=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,r.jsx)("div",{ref:s,className:(0,t.cn)("text-sm text-muted-foreground",a),...l})});o.displayName="CardDescription";let c=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,r.jsx)("div",{ref:s,className:(0,t.cn)("p-6 pt-0",a),...l})});c.displayName="CardContent";let p=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,r.jsx)("div",{ref:s,className:(0,t.cn)("flex items-center p-6 pt-0",a),...l})});p.displayName="CardFooter"},211:(e,s,a)=>{"use strict";a.d(s,{p:()=>i});var r=a(5155),l=a(2115),t=a(9602);let i=l.forwardRef((e,s)=>{let{className:a,type:l,...i}=e;return(0,r.jsx)("input",{type:l,className:(0,t.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:s,...i})});i.displayName="Input"},3689:(e,s,a)=>{"use strict";a.d(s,{J:()=>o});var r=a(5155),l=a(2115),t=a(6195),i=a(652),n=a(9602);let d=(0,i.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,r.jsx)(t.b,{ref:s,className:(0,n.cn)(d(),a),...l})});o.displayName=t.b.displayName},6352:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>C});var r=a(5155),l=a(8957),t=a(4267),i=a(6046),n=a(2115),d=a(2651),o=a(5037),c=a(5565),p=a(1781),u=a(211),m=a(3689),x=a(9602);let f=n.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,r.jsx)("textarea",{className:(0,x.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:s,...l})});f.displayName="Textarea";var h=a(4319),v=a(7364),y=a(7220),g=a(6462),j=a(7401);let b=(0,j.A)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);var N=a(1466),k=a(4081);let w=(0,j.A)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),A=(0,j.A)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),C=function(){let{isAuthenticated:e,loading:s,userProfile:a,getUserProfile:x,updateUserProfile:j}=(0,t.S)(),C=(0,i.useRouter)(),[z,M]=(0,n.useState)({name:(null==a?void 0:a.name)||"",bio:(null==a?void 0:a.bio)||"",profession:(null==a?void 0:a.profession)||"",resume:(null==a?void 0:a.resume)||"",phone:(null==a?void 0:a.phone)||""}),[R,F]=(0,n.useState)(!1),[P,T]=(0,n.useState)(!1),[V,D]=(0,n.useState)(null);(0,n.useEffect)(()=>{s||e||C.push("https://missionpro-app-4qaf.onrender.com/login")},[e,s,C]),(0,n.useEffect)(()=>{a&&Object.keys(a).length>0&&M(e=>({name:a.name||"",bio:a.bio||"",profession:a.profession||"",resume:a.resume||"",phone:a.phone||""}))},[a]);let B=e=>{let{name:s,value:a}=e.target;M(e=>({...e,[s]:a}))},H=async()=>{if(V)try{T(!0);let e=new FormData;e.append("cv",V);let s=await d.A.post("/api/v1/user/upload-cv",e,{headers:{"Content-Type":"multipart/form-data"}});M(e=>({...e,resume:s.data.cvPath})),a.auth0Id&&await x(a.auth0Id),o.Ay.success("CV uploaded successfully!"),D(null)}catch(e){console.error("Error uploading CV:",e),o.Ay.error("Failed to upload CV")}finally{T(!1)}},E=async e=>{e.preventDefault();try{F(!0),await j(z),o.Ay.success("Profile updated successfully!")}catch(e){console.error("Error updating profile:",e),o.Ay.error("Failed to update profile")}finally{F(!1)}};return s?(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsx)(l.A,{}),(0,r.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,r.jsx)("div",{className:"text-lg",children:"Loading..."})})]}):e?(0,r.jsxs)("div",{className:"flex flex-col min-h-screen bg-gray-50",children:[(0,r.jsx)(l.A,{}),(0,r.jsxs)("div",{className:"flex-1 pt-8 w-[90%] max-w-4xl mx-auto",children:[(0,r.jsx)("div",{className:"flex items-center gap-4 mb-6",children:(0,r.jsxs)(p.$,{variant:"ghost",size:"sm",onClick:()=>C.back(),className:"flex items-center gap-2",children:[(0,r.jsx)(v.A,{size:16}),"Retour"]})}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,r.jsxs)(h.Zp,{className:"md:col-span-1",children:[(0,r.jsxs)(h.aR,{className:"text-center",children:[(0,r.jsx)("div",{className:"mx-auto mb-4",children:(0,r.jsx)(c.default,{src:a.profilePicture||"/user.png",alt:a.name||"User",width:100,height:100,className:"rounded-full mx-auto"})}),(0,r.jsx)(h.ZB,{className:"text-xl",children:a.name}),(0,r.jsx)(h.BT,{children:a.email})]}),(0,r.jsx)(h.Wu,{children:(0,r.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(y.A,{size:14,className:"text-gray-500"}),(0,r.jsx)("span",{children:a.profession||"Non sp\xe9cifi\xe9"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(g.A,{size:14,className:"text-gray-500"}),(0,r.jsx)("span",{children:a.email})]}),a.phone&&(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(b,{size:14,className:"text-gray-500"}),(0,r.jsx)("span",{children:a.phone})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(N.A,{size:14,className:"text-gray-500"}),(0,r.jsxs)("span",{children:["Membre depuis ",new Date(a.createdAt).getFullYear()]})]})]})})]}),(0,r.jsxs)(h.Zp,{className:"md:col-span-2",children:[(0,r.jsxs)(h.aR,{children:[(0,r.jsx)(h.ZB,{children:"Param\xe8tres du Profil"}),(0,r.jsx)(h.BT,{children:"Mettez \xe0 jour vos informations de profil et pr\xe9f\xe9rences"})]}),(0,r.jsx)(h.Wu,{children:(0,r.jsxs)("form",{onSubmit:E,className:"space-y-6",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(m.J,{htmlFor:"name",children:"Nom Complet"}),(0,r.jsx)(u.p,{id:"name",name:"name",type:"text",value:z.name||"",onChange:B,placeholder:"Entrez votre nom complet",required:!0})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(m.J,{htmlFor:"profession",children:"Profession"}),(0,r.jsx)(u.p,{id:"profession",name:"profession",type:"text",value:z.profession||"",onChange:B,placeholder:"ex: D\xe9veloppeur Logiciel, Designer, etc."})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(m.J,{htmlFor:"phone",children:"Num\xe9ro de T\xe9l\xe9phone"}),(0,r.jsx)(u.p,{id:"phone",name:"phone",type:"tel",value:z.phone||"",onChange:B,placeholder:"+1 (555) 123-4567"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(m.J,{htmlFor:"bio",children:"Bio"}),(0,r.jsx)(f,{id:"bio",name:"bio",value:z.bio||"",onChange:B,placeholder:"Parlez-nous de vous...",rows:4,className:"resize-none"}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:"Ceci sera visible aux employeurs lorsque vous postulez pour des emplois."})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(m.J,{children:"CV/Resume"}),z.resume&&(0,r.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-gray-50 rounded-md",children:[(0,r.jsx)(k.A,{size:16,className:"text-blue-600"}),(0,r.jsx)("span",{className:"text-sm text-gray-700 flex-1",children:z.resume.includes("/uploads/")?"CV T\xe9l\xe9charg\xe9":"Lien CV Externe"}),(0,r.jsx)(p.$,{type:"button",variant:"outline",size:"sm",onClick:()=>window.open(z.resume.startsWith("http")?z.resume:"https://missionpro-app-4qaf.onrender.com".concat(z.resume),"_blank"),children:"Voir"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(u.p,{type:"file",accept:".pdf",onChange:e=>{var s;let a=null===(s=e.target.files)||void 0===s?void 0:s[0];if(a){if("application/pdf"!==a.type){o.Ay.error("Please select a PDF file");return}if(a.size>5242880){o.Ay.error("File size must be less than 5MB");return}D(a)}},className:"flex-1"}),(0,r.jsxs)(p.$,{type:"button",variant:"outline",onClick:H,disabled:!V||P,className:"flex items-center gap-2",children:[(0,r.jsx)(w,{size:14}),P?"T\xe9l\xe9chargement...":"T\xe9l\xe9charger"]})]}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:"T\xe9l\xe9chargez un fichier PDF (max 5MB) ou gardez votre lien CV existant."})]}),(0,r.jsx)("div",{className:"flex justify-end pt-4",children:(0,r.jsxs)(p.$,{type:"submit",disabled:R,className:"flex items-center gap-2",children:[(0,r.jsx)(A,{size:16}),R?"Sauvegarde...":"Sauvegarder les Modifications"]})})]})})]})]})]})]}):null}},7364:(e,s,a)=>{"use strict";a.d(s,{A:()=>r});let r=(0,a(7401).A)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},7220:(e,s,a)=>{"use strict";a.d(s,{A:()=>r});let r=(0,a(7401).A)("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]])},4081:(e,s,a)=>{"use strict";a.d(s,{A:()=>r});let r=(0,a(7401).A)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},6462:(e,s,a)=>{"use strict";a.d(s,{A:()=>r});let r=(0,a(7401).A)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},1466:(e,s,a)=>{"use strict";a.d(s,{A:()=>r});let r=(0,a(7401).A)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},6195:(e,s,a)=>{"use strict";a.d(s,{b:()=>n});var r=a(2115),l=a(3360),t=a(5155),i=r.forwardRef((e,s)=>(0,t.jsx)(l.sG.label,{...e,ref:s,onMouseDown:s=>{var a;s.target.closest("button, input, select, textarea")||(null===(a=e.onMouseDown)||void 0===a||a.call(e,s),!s.defaultPrevented&&s.detail>1&&s.preventDefault())}}));i.displayName="Label";var n=i}},e=>{var s=s=>e(e.s=s);e.O(0,[238,94,37,957,441,517,358],()=>s(780)),_N_E=e.O()}]);