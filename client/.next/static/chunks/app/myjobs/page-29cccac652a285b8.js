(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[609],{4143:(e,s,a)=>{Promise.resolve().then(a.bind(a,3833))},6397:(e,s,a)=>{"use strict";a.d(s,{A:()=>r});var t=a(5155);a(2115);var l=a(6036);let r=function(){let{t:e}=(0,l.o)();return(0,t.jsx)("footer",{className:"py-12 bg-white",children:(0,t.jsx)("div",{className:"mx-auto px-4 text-center text-black",children:(0,t.jsxs)("p",{children:["\xa9 ",new Date().getFullYear()," MissionPro. ",e("footer.rights"),"."]})})})}},4319:(e,s,a)=>{"use strict";a.d(s,{BT:()=>d,Wu:()=>n,ZB:()=>o,Zp:()=>i,aR:()=>c,wL:()=>u});var t=a(5155),l=a(2115),r=a(9602);let i=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)("div",{ref:s,className:(0,r.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...l})});i.displayName="Card";let c=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)("div",{ref:s,className:(0,r.cn)("flex flex-col space-y-1.5 p-6",a),...l})});c.displayName="CardHeader";let o=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)("div",{ref:s,className:(0,r.cn)("text-2xl font-semibold leading-none tracking-tight",a),...l})});o.displayName="CardTitle";let d=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)("div",{ref:s,className:(0,r.cn)("text-sm text-muted-foreground",a),...l})});d.displayName="CardDescription";let n=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)("div",{ref:s,className:(0,r.cn)("p-6 pt-0",a),...l})});n.displayName="CardContent";let u=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)("div",{ref:s,className:(0,r.cn)("flex items-center p-6 pt-0",a),...l})});u.displayName="CardFooter"},3833:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>v});var t=a(5155),l=a(6397),r=a(8957),i=a(2115),c=a(9810),o=a(5565),d=a(4319),n=a(6847),u=a(3606),p=a(1781),x=a(2823),f=a(7401);let m=(0,f.A)("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]),h=(0,f.A)("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]);var j=a(6046),g=a(4267),y=a(959);let b=function(e){let{job:s}=e,{deleteJob:a,likeJob:l}=(0,c.x)(),{userProfile:r,isAuthenticated:f,getUserProfile:b}=(0,g.S)(),[v,N]=i.useState(!1),k=(0,j.useRouter)(),w=e=>{N(e=>!e),l(e)};return(0,i.useEffect)(()=>{f&&s.createdBy._id&&b(s.createdBy._id)},[f,s.createdBy._id]),(0,i.useEffect)(()=>{(null==r?void 0:r._id)&&N(s.likes.includes(null==r?void 0:r._id))},[s.likes,r._id]),(0,t.jsxs)("div",{className:"p-8 bg-white rounded-xl flex flex-col gap-5",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-4 mb-2 cursor-pointer",onClick:()=>k.push("/job/".concat(s._id)),children:[(0,t.jsx)(o.default,{alt:"logo",src:s.createdBy.profilePicture||"/user.png",width:48,height:48,className:"rounded-full shadow-sm"}),(0,t.jsxs)("div",{children:[(0,t.jsx)(d.ZB,{className:"text-xl font-bold truncate",children:s.title}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:s.createdBy.name})]})]}),(0,t.jsx)("button",{className:"text-2xl ".concat(v?"text-[#7263f3]":"text-gray-400"," "),onClick:()=>{f?w(s._id):k.push("https://missionpro-app-4qaf.onrender.com/login")},children:v?y.Fc:y.qX})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground mb-2",children:s.location}),(0,t.jsxs)("p",{className:"text-sm text-muted-foreground mb-4",children:["Posted ",(0,n.H)(s.createdAt)]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"flex flex-wrap gap-2 mb-4",children:s.skills.map((e,s)=>(0,t.jsx)(u.E,{variant:"secondary",children:e},s))}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2 mb-4",children:s.tags.map((e,s)=>(0,t.jsx)(u.E,{variant:"outline",children:e},s))}),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[(0,t.jsx)(x.A,{size:16}),(0,t.jsxs)("span",{children:[s.applicants.length," ",1===s.applicants.length?"Candidat":"Candidats"]})]})]}),s.createdBy._id===(null==r?void 0:r._id)&&(0,t.jsxs)("div",{className:"self-end flex flex-col gap-2",children:[(0,t.jsxs)(p.$,{variant:"outline",size:"sm",className:"".concat(s.applicants.length>0?"text-blue-600 border-blue-600 hover:bg-blue-50":"text-gray-600 border-gray-300 hover:bg-gray-50"),onClick:()=>k.push("/job/".concat(s._id,"/applicants")),children:[(0,t.jsx)(x.A,{size:14,className:"mr-1"}),s.applicants.length>0?"Voir les Candidats":"Aucun Candidat"]}),(0,t.jsxs)("div",{className:"flex gap-1",children:[(0,t.jsxs)(p.$,{variant:"ghost",size:"icon",className:"text-gray-500 hover:text-blue-500",onClick:()=>k.push("/edit-job/".concat(s._id)),children:[(0,t.jsx)(m,{size:14}),(0,t.jsx)("span",{className:"sr-only",children:"Modifier l'emploi"})]}),(0,t.jsxs)(p.$,{variant:"ghost",size:"icon",className:"text-gray-500 hover:text-red-500",onClick:()=>a(s._id),children:[(0,t.jsx)(h,{size:14}),(0,t.jsx)("span",{className:"sr-only",children:"Supprimer l'emploi"})]})]})]})]})]})]})},v=function(){let{userJobs:e,jobs:s}=(0,c.x)(),{isAuthenticated:a,loading:o,userProfile:d}=(0,g.S)(),[n,u]=i.useState("posts"),p=null==d?void 0:d._id,x=(0,j.useRouter)();(0,i.useEffect)(()=>{o||a||x.push("https://missionpro-app-4qaf.onrender.com/login")},[a]);let f=s.filter(e=>e.likes.includes(p));return o?null:(0,t.jsxs)("div",{children:[(0,t.jsx)(r.A,{}),(0,t.jsxs)("div",{className:"mt-8 w-[90%] mx-auto flex flex-col",children:[(0,t.jsxs)("div",{className:"self-center flex items-center gap-6",children:[(0,t.jsx)("button",{className:"border border-gray-400 px-8 py-2 rounded-full font-medium\n          ".concat("posts"===n?"border-transparent bg-[#7263F3] text-white":"border-gray-400"),onClick:()=>u("posts"),children:"Mes Offres d'Emploi"}),(0,t.jsx)("button",{className:"border border-gray-400 px-8 py-2 rounded-full font-medium\n          ".concat("likes"===n?"border-transparent bg-[#7263F3] text-white":"border-gray-400"),onClick:()=>u("likes"),children:"Emplois Aim\xe9s"})]}),"posts"===n&&0===e.length&&(0,t.jsx)("div",{className:"mt-8 flex items-center",children:(0,t.jsx)("p",{className:"text-2xl font-bold",children:"Aucune offre d'emploi trouv\xe9e."})}),"likes"===n&&0===f.length&&(0,t.jsx)("div",{className:"mt-8 flex items-center",children:(0,t.jsx)("p",{className:"text-2xl font-bold",children:"Aucun emploi aim\xe9 trouv\xe9."})}),(0,t.jsxs)("div",{className:"my-8 grid grid-cols-2 gap-6",children:["posts"===n&&e.map(e=>(0,t.jsx)(b,{job:e},e._id)),"likes"===n&&f.map(e=>(0,t.jsx)(b,{job:e},e._id))]})]}),(0,t.jsx)(l.A,{})]})}},9810:(e,s,a)=>{"use strict";a.d(s,{P:()=>n,x:()=>u});var t=a(5155),l=a(2115),r=a(4267),i=a(2651),c=a(5037),o=a(6046);let d=(0,l.createContext)();i.A.defaults.baseURL="https://missionpro-app-4qaf.onrender.com",i.A.defaults.withCredentials=!0;let n=e=>{let{children:s}=e,{userProfile:a,getUserProfile:n}=(0,r.S)(),u=(0,o.useRouter)(),[p,x]=(0,l.useState)([]),[f,m]=(0,l.useState)(!1),[h,j]=(0,l.useState)([]),[g,y]=(0,l.useState)({tags:"",location:"",title:""}),[b,v]=(0,l.useState)({fullTime:!1,partTime:!1,internship:!1,contract:!1,fullStack:!1,backend:!1,devOps:!1,uiux:!1}),[N,k]=(0,l.useState)(3e4),[w,_]=(0,l.useState)(12e4),A=async()=>{m(!0);try{let e=await i.A.get("/api/v1/jobs");x(e.data)}catch(e){console.log("Error getting jobs",e)}finally{m(!1)}},C=async e=>{try{let s=await i.A.post("/api/v1/jobs",e);c.Ay.success("Job created successfully"),x(e=>[s.data,...e]),a._id&&(j(e=>[s.data,...e]),await S(a._id)),await A(),u.push("/job/".concat(s.data._id))}catch(e){console.log("Error creating job",e)}},E=async(e,s)=>{try{let a=await i.A.put("/api/v1/jobs/".concat(e),s);return c.Ay.success("Job updated successfully"),x(s=>s.map(s=>s._id===e?a.data:s)),j(s=>s.map(s=>s._id===e?a.data:s)),await A(),a.data}catch(e){throw console.log("Error updating job",e),c.Ay.error("Failed to update job"),e}},S=async e=>{m(!0);try{let s=await i.A.get("/api/v1/jobs/user/"+e);j(s.data),m(!1)}catch(e){console.log("Error getting user jobs",e)}finally{m(!1)}},R=async(e,s,a)=>{m(!0);try{let t=new URLSearchParams;e&&t.append("tags",e),s&&t.append("location",s),a&&t.append("title",a);let l=await i.A.get("/api/v1/jobs/search?".concat(t.toString()));x(l.data),m(!1)}catch(e){console.log("Error searching jobs",e)}finally{m(!1)}},M=async e=>{m(!0);try{let s=await i.A.get("/api/v1/jobs/".concat(e));return m(!1),s.data}catch(e){console.log("Error getting job by id",e)}finally{m(!1)}},z=async e=>{console.log("Job liked",e);try{let s=await i.A.put("/api/v1/jobs/like/".concat(e));console.log("Job liked successfully",s),c.Ay.success("Job liked successfully"),A()}catch(e){console.log("Error liking job",e)}},B=async e=>{let s=p.find(s=>s._id===e);if(s&&s.applicants.includes(a._id)){c.Ay.error("You have already applied to this job");return}try{await i.A.put("/api/v1/jobs/apply/".concat(e)),c.Ay.success("Applied to job successfully"),A()}catch(e){console.log("Error applying to job",e),c.Ay.error(e.response.data.message)}},F=async e=>{try{await i.A.delete("/api/v1/jobs/".concat(e)),x(s=>s.filter(s=>s._id!==e)),j(s=>s.filter(s=>s._id!==e)),c.Ay.success("Job deleted successfully")}catch(e){console.log("Error deleting job",e)}};return(0,l.useEffect)(()=>{A()},[]),(0,l.useEffect)(()=>{a._id&&(S(a._id),n(a.auth0Id))},[a._id]),(0,t.jsx)(d.Provider,{value:{jobs:p,loading:f,createJob:C,updateJob:E,userJobs:h,searchJobs:R,getJobById:M,likeJob:z,applyToJob:B,deleteJob:F,handleSearchChange:(e,s)=>{y(a=>({...a,[e]:s}))},searchQuery:g,setSearchQuery:y,handleFilterChange:e=>{v(s=>({...s,[e]:!s[e]}))},filters:b,minSalary:N,setMinSalary:k,maxSalary:w,setMaxSalary:_,setFilters:v},children:s})},u=()=>(0,l.useContext)(d)},2823:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(7401).A)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},959:(e,s,a)=>{"use strict";a.d(s,{C5:()=>i,Fc:()=>r,XX:()=>c,p_:()=>o,qX:()=>l,tp:()=>d});var t=a(5155);let l=(0,t.jsx)("i",{className:"fa-regular fa-bookmark"}),r=(0,t.jsx)("i",{className:"fa-solid fa-bookmark"}),i=(0,t.jsx)("i",{className:"fa-solid fa-location-dot"}),c=(0,t.jsx)("i",{className:"fa-solid fa-grip"}),o=(0,t.jsx)("i",{className:"fa-solid fa-list-ul"}),d=(0,t.jsx)("i",{className:"fa-solid fa-table-columns"})},6847:(e,s,a)=>{"use strict";a.d(s,{H:()=>r});var t=a(3691),l=a.n(t);let r=e=>l()(e).fromNow()}},e=>{var s=s=>e(e.s=s);e.O(0,[586,238,94,37,957,441,517,358],()=>s(4143)),_N_E=e.O()}]);